<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-list/iron-list.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="shared-styles.html">

<dom-module id="ranking-view">
    <template>
        <style include="shared-styles">
            :host {
                display: block;

                padding: 10px;
            }

            h1 {
                text-align: center;
                margin: 20px 0;
                color: #d14;
            }

            .podium {
                align-items: flex-end;
                display: flex;
                flex-direction: row;
                justify-content: center;
                margin: 45px 0 30px;
                width: 100%;
            }

            .podium div {
                background-color: #4285f4;
                margin: 0 .5px;
                padding: 10px;
                text-align: center;
                width: 25%;
            }

            .users-podium {
                margin: 0;
                margin-top: -35px;
            }

            .podium-q {
                color: white;
                font-size: 30px;
                margin: 10px 0 0;
            }

            .podium div:nth-child(1) {
                height: 100px;
            }

            .podium div:nth-child(2) {
                height: 150px;
            }

            .podium div:nth-child(3) {
                height: 75px;
            }

            .container-list {
                display: flex;
                flex-direction: column;
            }

            .container-list div {
                background-color: white;
                border: 1px solid #ddd;
                border-radius: 5px;
                display: flex;
                padding: 5px;
                margin: 5px 0;
            }

            .container-list div span {
                display: flex;
                flex: 1;
                padding: 5px 0 0 15px;
            }

            .user-img {
                height: 35px;
            }

            @media(max-width: 768px) {
                .users-podium {
                    font-size: 14px;
                }
                
                .points-podium {
                    display: none;
                }
            }
        </style>

        <div>
            <h1> [[title]] </h1>
            <div class="podium">
                <div>
                    <p class="users-podium">{{secondEl}} <span class="points-podium">points</span> </p>
                    <p class="podium-q">2</p>
                </div>
                <div>
                    <p class="users-podium">{{firstEl}} <span class="points-podium">points</span> </p>
                    <p class="podium-q">1</p>
                </div>
                <div>
                    <p class="users-podium">{{thirdEl}} <span class="points-podium">points</span> </p>
                    <p class="podium-q">3</p>
                </div>
            </div>
            <iron-list items="[[_sortedData]]" as="item">
                <template>
                    <div class="container-list">
                        <div>
                            <img class="user-img" src="../images/polymer.png" width="50px" alt=""/>
                            <span>[[item.name]]: [[item.points]] points</span>
                        </div>
                    </div>
                </template>
            </iron-list>
        </div>
    </template>

    <script>
      let data =
          [
            {
              "name": "Alvaro",
              "points": 0
            },
            {
              "name": "Luis",
              "points": 5
            },
            {
              "name": "Mario",
              "points": 7
            },
            {
              "name": "Miguel",
              "points": 5
            },
            {
              "name": "Ivan",
              "points": 10
            },
            {
              "name": "Antonio",
              "points": 9
            }
          ];

      Polymer({

        is: 'ranking-view',
        properties: {
          data: {
            type: Array
          },
          _sortedData: {
            type: Array,
            computed: '_computeData(data)'
          }
        },
        ready: function() {
          this.data = data.sort(this._sortItems);
          this.firstEl = `${data[0].name}: ${data[0].points}`;
          this.secondEl =  `${data[1].name}: ${data[1].points}`;
          this.thirdEl = `${data[2].name}: ${data[2].points}`;
          this.title = "Global Ranking";

        },
        _computeData: function (data) {
          if (data.length < 4) return [];
          return data.slice(3);
        },
        _sortItems: function(a, b) {
          if(a.points > b.points) return -1;
          if(a.points < b.points) return 1;
          return 0;
        }
      });
    </script>
</dom-module>


Polymer(FooterCV);